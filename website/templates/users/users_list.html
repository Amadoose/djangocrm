{% extends 'base.html' %}
{% load static %}
{% block content %}


{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{% static 'css/users/u_list.css' %}">
{% endblock %}

<div class="container-fluid px-4 py-3"> 
    <!-- Header Section -->
    <h2 class="page-title">Users</h2>
    <div class="list-header">        
        <div class="header-left">            
            <p class="client-count"> Manage users with access to this platform </p>
            <p class="client-count">|</p>
            <span class="client-count" id="clientCount">{{ clientes|length }} clients</span>
        </div>
        <div class="header-right">
            <div class="search-container">
                <i class="bi bi-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Search user...">
            </div>
            <a href="{% url 'add_record' %}" class="btn-link">
                <button class='new-client-btn'>
                    <i class="bi bi-plus"></i>
                    <span>New User</span>
                </button>
            </a>
        </div>
    </div>   
<!-- Table Container -->
<div class="table-container">
    <div class="modern-table-wrapper">
        <table class="modern-table" id="userTable">
            <thead>
                <tr>
                    <th data-column="username" class="sortable">
                        <span>Username</span>
                        <i class="bi bi-chevron-expand sort-icon"></i>
                    </th>
                    <th data-column="first_name" class="sortable">
                        <span>First Name</span>
                        <i class="bi bi-chevron-expand sort-icon"></i>
                    </th>
                    <th data-column="last_name" class="sortable">
                        <span>Last Name</span>
                        <i class="bi bi-chevron-expand sort-icon"></i>
                    </th>
                    <th data-column="email" class="sortable">
                        <span>Email</span>
                        <i class="bi bi-chevron-expand sort-icon"></i>
                    </th>
                    <th data-column="is_staff" class="sortable">
                        <span>Permission</span>
                        <i class="bi bi-chevron-expand sort-icon"></i>
                    </th>
                    <th class="actions-column"></th>
                </tr>
            </thead>
            <tbody id="tableBody">
                {% for user in users %}
                <tr class="table-row">
                    <td>{{ user.username }}</td>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>
                        <a href="mailto:{{ user.email }}" class="email-link" onclick="event.stopPropagation();">
                            {{ user.email }}
                        </a>
                    </td>
                    <td>
                        {% if user.is_superuser %}
                            <span class="badge bg-danger">Superuser</span>
                        {% elif user.is_staff %}
                            <span class="badge bg-warning text-dark">Staff</span>
                        {% else %}
                            <span class="badge bg-secondary">User</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-icon">
            <i class="bi bi-search"></i>
        </div>
        <h4>No clients found</h4>
        <p>Try adjusting your search or filter criteria</p>
        <button class="clear-filters-btn" onclick="clearAllFilters()">Clear Filters</button>
    </div>
</div>

<script src="{% static 'js/c_list.js' %}"></script>

    
{% comment %} end div {% endcomment %}   
</div>


{% endblock %}